"use strict";const user=document.querySelector(".js_user"),pass=document.querySelector(".js_pass"),wellcome=document.querySelector(".js_wellcome"),loginButton=document.querySelector(".js_login"),logoutButon=document.querySelector(".js_logout"),buttonBack=document.querySelector(".js_buttonBack"),gif=document.querySelector(".js_gif"),hideSection=document.getElementById("hideSection");var resultsContainer=document.getElementById("resultsContainer");const pagination=document.querySelector(".js_pagination");var btn_next=document.getElementById("btn_next"),btn_prev=document.getElementById("btn_prev"),page_span=document.getElementById("page");let login=[],results=[],buttons="";function userLogin(){user.value===login.user&&pass.value===login.pass?(console.log("im in"),hideSection.classList.add("hidden"),pagination.classList.remove("hidden"),logoutButon.classList.remove("hidden"),wellcome.classList.add("hidden"),gif.classList.add("hidden"),changePage(1)):(alert("Porfavor ingrese nombre de usuario y contraseña correctos."),user.value="",pass.value="")}function handleLogin(e){e.preventDefault(),userLogin()}function handleLogout(){location.reload()}var current_page=1,records_per_page=3;function prevPage(){current_page>1&&changePage(--current_page)}function nextPage(){current_page<numPages()&&(changePage(++current_page),listenList())}function changePage(e){e<1&&(e=1),e>numPages()&&(e=numPages()),resultsContainer.innerHTML="";for(var s=(e-1)*records_per_page;s<e*records_per_page&&s<results.length;s++)resultsContainer.innerHTML+=`<li id=${results[s].id} class="results__item js_item">\n    <p class="results__name">Nombre del fichero: ${results[s].name}</p>\n    <p class="results__date">fecha de inserción: ${results[s].date}</p>\n    <p class="results__actualization">última actualización: ${results[s].actualization}</p>\n    <p class="results__os">sistema operativo: ${results[s].os}</p>\n  </li>`,buttonBack.classList.add("hidden"),listenList();const t=Math.ceil(results.length/records_per_page);console.log(t),page_span.innerHTML=`${e} / ${t}`,btn_prev.style.visibility=1==e?"hidden":"visible",e==numPages()?btn_next.style.visibility="hidden":btn_next.style.visibility="visible"}function numPages(){return Math.ceil(results.length/records_per_page)}function handleItem(e){var s=e.currentTarget.id;console.log(s);let t="";for(const e of results)t=`<li id=${e.id} class="results__item js_item">\n    <p class="results__name">Nombre del fichero: ${e.name}</p>\n    <p class="results__extension"><strong>Extension:</strong> ${e.extension} <i class="fas fa-file-pdf pdf_icon"></i></p>\n    <p class="results__size"><strong>Tamaño:</strong> ${e.size}</p>\n    <p class="results__hash"><strong>Hash:</strong> ${e.hash.md5}</p>\n    <p class="results__hash"><strong>Sha256:</strong> ${e.hash.sha256}</p>\n    <p class="results__hash"><strong>Sha1:</strong> ${e.hash.sha1}</p>\n    <p class="results__ip"><strong>IP:</strong> ${e.ip}</p>\n    <p class="results__score"><strong>Puntuación:</strong> ${e.score}</p>\n    <p class="results__fileList"><strong>Listado ficheros:</strong> ${e.fileList.one}</p>\n    <p class="results__fileList"><strong>Listado ficheros:</strong> ${e.fileList.two}</p>\n    <p class="results__fileList"><strong>Listado ficheros:</strong> ${e.fileList.three}</p>\n    <p class="results__antivirusList"><strong>Kaspersky:</strong> ${e.antivirusList.Kaspersky}</p>\n    <p class="results__antivirusList"><strong>ESET:</strong> ${e.antivirusList.ESET}</p>\n    <p class="results__antivirusList"><strong>Norton:</strong> ${e.antivirusList.Norton}</p>\n     </li>`,buttonBack.classList.remove("hidden");pagination.classList.add("hidden"),resultsContainer.innerHTML=t}function listenList(){const e=document.querySelectorAll(".js_item");for(const s of e)s.addEventListener("click",handleItem)}function handleBack(e){e.preventDefault(),changePage(1),pagination.classList.remove("hidden")}function callToApi(){fetch("https://raw.githubusercontent.com/patricuismart/api-ravenloop-tech-test/main/api/data.json").then(e=>e.json()).then(e=>{login=e.login,results=e.results})}callToApi(),loginButton.addEventListener("click",handleLogin),logoutButon.addEventListener("click",handleLogout),buttonBack.addEventListener("click",handleBack);