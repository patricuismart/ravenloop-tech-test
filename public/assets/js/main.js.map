{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// global variables\nconst user = document.querySelector('.js_user');\nconst pass = document.querySelector('.js_pass');\nconst wellcome = document.querySelector('.js_wellcome');\nconst loginButton = document.querySelector('.js_login');\nconst logoutButon = document.querySelector('.js_logout');\nconst buttonBack = document.querySelector('.js_buttonBack');\nconst gif = document.querySelector('.js_gif');\nconst hideSection = document.getElementById('hideSection');\nvar resultsContainer = document.getElementById('resultsContainer');\nconst pagination = document.querySelector('.js_pagination');\n\n// variables pagination\n\nvar btn_next = document.getElementById('btn_next');\nvar btn_prev = document.getElementById('btn_prev');\nvar page_span = document.getElementById('page');\n\n// info array results api json\nlet login = [];\nlet results = [];\nlet buttons = '';\n\n//User Login\nfunction userLogin() {\n  if (user.value === login.user && pass.value === login.pass) {\n    console.log('im in');\n    hideSection.classList.add('hidden');\n    pagination.classList.remove('hidden');\n    logoutButon.classList.remove('hidden');\n    wellcome.classList.add('hidden');\n    gif.classList.add('hidden');\n    changePage(1);\n  } else {\n    alert('Porfavor ingrese nombre de usuario y contraseña correctos.');\n    user.value = '';\n    pass.value = '';\n  }\n  // call to render results function (with pagination)\n}\n\n// Handle Functions\n\nfunction handleLogin(event) {\n  event.preventDefault();\n  userLogin();\n}\n\nfunction handleLogout() {\n  location.reload();\n}\n\n//Pagination\n\nvar current_page = 1;\nvar records_per_page = 3;\n\nfunction prevPage() {\n  if (current_page > 1) {\n    current_page--;\n    changePage(current_page);\n  }\n}\n\nfunction nextPage() {\n  if (current_page < numPages()) {\n    current_page++;\n    changePage(current_page);\n    listenList();\n  }\n}\n\nfunction changePage(page) {\n  // Validate page\n\n  if (page < 1) page = 1;\n  if (page > numPages()) page = numPages();\n  resultsContainer.innerHTML = '';\n\n  //Render List of results\n\n  for (\n    var i = (page - 1) * records_per_page;\n    i < page * records_per_page && i < results.length;\n    i++\n  ) {\n    resultsContainer.innerHTML += `<li id=${results[i].id} class=\"results__item js_item\">\n    <p class=\"results__name\">Nombre del fichero: ${results[i].name}</p>\n    <p class=\"results__date\">fecha de inserción: ${results[i].date}</p>\n    <p class=\"results__actualization\">última actualización: ${results[i].actualization}</p>\n    <p class=\"results__os\">sistema operativo: ${results[i].os}</p>\n  </li>`;\n    buttonBack.classList.add('hidden');\n    listenList();\n  }\n\n  //render page number\n\n  const totalPages = Math.ceil(results.length / records_per_page);\n  console.log(totalPages);\n  page_span.innerHTML = `${page} / ${totalPages}`;\n\n  if (page == 1) {\n    btn_prev.style.visibility = 'hidden';\n  } else {\n    btn_prev.style.visibility = 'visible';\n  }\n\n  if (page == numPages()) {\n    btn_next.style.visibility = 'hidden';\n  } else {\n    btn_next.style.visibility = 'visible';\n  }\n}\n\n// returns the integer greater or equal closest to division\n\nfunction numPages() {\n  return Math.ceil(results.length / records_per_page);\n}\n\n// Detail of result\n\n// Handle function selected item by id\n\nfunction handleItem(ev) {\n  var selectedItem = ev.currentTarget.id;\n  console.log(selectedItem);\n\n  //render detail item  selected\n  let html = '';\n  for (const result of results) {\n    html = `<li id=${result.id} class=\"results__item js_item\">\n    <p class=\"results__name\">Nombre del fichero: ${result.name}</p>\n    <p class=\"results__extension\"><strong>Extension:</strong> ${result.extension} <i class=\"fas fa-file-pdf pdf_icon\"></i></p>\n    <p class=\"results__size\"><strong>Tamaño:</strong> ${result.size}</p>\n    <p class=\"results__hash\"><strong>Hash:</strong> ${result.hash.md5}</p>\n    <p class=\"results__hash\"><strong>Sha256:</strong> ${result.hash.sha256}</p>\n    <p class=\"results__hash\"><strong>Sha1:</strong> ${result.hash.sha1}</p>\n    <p class=\"results__ip\"><strong>IP:</strong> ${result.ip}</p>\n    <p class=\"results__score\"><strong>Puntuación:</strong> ${result.score}</p>\n    <p class=\"results__fileList\"><strong>Listado ficheros:</strong> ${result.fileList.one}</p>\n    <p class=\"results__fileList\"><strong>Listado ficheros:</strong> ${result.fileList.two}</p>\n    <p class=\"results__fileList\"><strong>Listado ficheros:</strong> ${result.fileList.three}</p>\n    <p class=\"results__antivirusList\"><strong>Kaspersky:</strong> ${result.antivirusList.Kaspersky}</p>\n    <p class=\"results__antivirusList\"><strong>ESET:</strong> ${result.antivirusList.ESET}</p>\n    <p class=\"results__antivirusList\"><strong>Norton:</strong> ${result.antivirusList.Norton}</p>\n     </li>`;\n    buttonBack.classList.remove('hidden');\n  }\n  pagination.classList.add('hidden');\n  resultsContainer.innerHTML = html;\n}\n\n//Listen to all the items, go through them and identify by id on click with event\n\nfunction listenList() {\n  const listMalware = document.querySelectorAll('.js_item');\n  for (const itemClicked of listMalware) {\n    itemClicked.addEventListener('click', handleItem);\n  }\n}\n\n// UI Back return to list of all results\nfunction handleBack(event) {\n  event.preventDefault();\n  changePage(1);\n  pagination.classList.remove('hidden');\n}\n\n//Call to api\n// FETCH\nfunction callToApi() {\n  fetch(\n    'https://raw.githubusercontent.com/patricuismart/api-ravenloop-tech-test/main/api/data.json'\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      login = data.login;\n      results = data.results;\n    });\n}\n\ncallToApi();\n\n//Events\nloginButton.addEventListener('click', handleLogin);\nlogoutButon.addEventListener('click', handleLogout);\nbuttonBack.addEventListener('click', handleBack);\n"]}